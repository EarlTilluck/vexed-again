"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2343],{2343:(H,b,a)=>{a.r(b),a.d(b,{GamePageModule:()=>w});var c=a(9475),s=a(9808),v=a(2382),k=a(5638),t=a(1223),B=a(2901),m=a(3405),d=a(9846);const y=["block"],P=function(n,i){return{height:n,width:i}};function M(n,i){if(1&n&&t._UZ(0,"ion-icon",3),2&n){const e=t.oxw();t.Q6J("ngStyle",t.WLB(2,P,e.ui.iconSize,e.ui.iconSize))("name",e.gameBlock.name)}}const O=function(n,i){return["block",n,i]},_=function(n,i,e,o,r){return{height:n,width:i,left:e,top:o,opacity:r}};let G=(()=>{class n{constructor(e,o,r){this.gestureCtrl=e,this.game=o,this.ui=r,this.left="0px",this.top="0px",this.opacity=1}onResize(){this.moveToPosition()}ngOnInit(){this.moveToPosition()}ngAfterViewInit(){this.gesture=this.gestureCtrl.create({el:this.blockElementRef.nativeElement,threshold:5,gestureName:"game-gesture",passive:!1,direction:"x",gesturePriority:99,disableScroll:!0,onStart:e=>this.onGestureStart(e),onMove:e=>this.onGestureMove(e),onEnd:e=>this.onGestureEnd(e)},!0),this.gesture.enable(),this.game.moveEvent.subscribe(e=>{e.blockId===this.gameBlock.blockId&&this.update()})}onGestureStart(e){""===this.ui.blockFor&&!1!==this.gameBlock.movable&&(this.ui.blockFor=this.gameBlock.blockId,this.ui.cursorLeft=this.left,this.ui.cursorTop=this.top,this.ui.cursorOpacity=1)}onGestureMove(e){if(this.ui.blockFor!==this.gameBlock.blockId||!1===this.gameBlock.movable)return;let o=parseInt(this.left.replace("px",""),10);const r=Math.floor(e.deltaX),g=Math.abs(r),l=parseInt(this.ui.blockSize.replace("px",""),10),h=Math.floor(g/l)+1;let p=0,f=0;for(let u=1;u<=h;u++){p=r>0?this.gameBlock.position+u:this.gameBlock.position-u;const C=this.game.getBlock(this.gameBlock.line,p);null!==C&&"Y"===C.type?f++:u=h+1}r>0?(this.game.direction="right",o+=f*l):(this.game.direction="left",o-=f*l),this.game.moveRepeat=h,this.ui.cursorLeft=o+"px"}onGestureEnd(e){this.ui.blockFor===this.gameBlock.blockId&&!1!==this.gameBlock.movable&&(this.game.currentBlock=this.gameBlock,this.game.tryMove(),this.ui.cursorOpacity=0)}moveToPosition(){let e=parseInt(this.ui.blockSize.replace("px",""),10);isNaN(e)&&(e=0);let r=e*(10%this.game.blocksPerLine/2),l=e*(8%this.game.totalLines/2);l+=10,r+=10,this.top=l+this.gameBlock.line*e+"px",this.left=r+this.gameBlock.position*e+"px",this.ui.borderTop=l-10+"px",this.ui.borderLeft=r-10+"px",this.ui.borderHeight=this.game.totalLines*e+20+"px",this.ui.borderWidth=this.game.blocksPerLine*e+20+"px"}update(){this.moveToPosition(),this.opacity=this.gameBlock.opacity,0===this.opacity&&setTimeout(()=>{this.gameBlock.movable=!1,this.gameBlock.type="Y",this.gameBlock.name=""},500)}ngOnDestroy(){this.gesture.destroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.TH),t.Y36(m.h),t.Y36(d.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-game-block"]],viewQuery:function(e,o){if(1&e&&t.Gf(y,5),2&e){let r;t.iGM(r=t.CRH())&&(o.blockElementRef=r.first)}},hostBindings:function(e,o){1&e&&t.NdJ("resize",function(g){return o.onResize(g)},!1,t.Jf7)},inputs:{gameBlock:"gameBlock"},decls:3,vars:12,consts:[[3,"ngClass","ngStyle"],["block",""],[3,"ngStyle","name",4,"ngIf"],[3,"ngStyle","name"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0,1),t.YNc(2,M,1,5,"ion-icon",2),t.qZA()),2&e&&(t.Q6J("ngClass",t.WLB(3,O,o.gameBlock.type,"true"===o.ui.darkMode?"dark":"light"))("ngStyle",t.qbA(6,_,o.ui.blockSize,o.ui.blockSize,o.left,o.top,o.opacity)),t.xp6(2),t.Q6J("ngIf",o.gameBlock.movable))},directives:[s.mk,s.PC,s.O5,c.gu],styles:[".block[_ngcontent-%COMP%]{position:absolute;transition:top .25s linear,left .25s linear,opacity .5s ease-in;-webkit-user-select:none;user-select:none;display:flex;justify-content:center;align-items:center;border-radius:3px;color:#fff;cursor:grab}.light[_ngcontent-%COMP%]:active{border:1px solid #616161}.dark[_ngcontent-%COMP%]:active{border:1px solid #FFF}.X[_ngcontent-%COMP%]{background-color:#5d6d7e;border-radius:0;cursor:default}.Y[_ngcontent-%COMP%]{display:none;border-radius:0;cursor:default}.a[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#BA68C8,#FF00FF)}.b[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#26C6DA,#03A9F4)}.c[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#FF8A65,#E65100)}.d[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#9575CD,#512DA8)}.e[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#4DB6AC,#33FF33)}.f[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#EC407A,#CC0000)}.g[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#7986CB,#283593)}.h[_ngcontent-%COMP%]{background-image:radial-gradient(circle,#00CC99,#009900)}"]}),n})();const F=function(n,i,e){return[n,i,e]},S=function(n,i,e,o,r){return{height:n,width:i,left:e,top:o,opacity:r}};let T=(()=>{class n{constructor(e,o){this.ui=e,this.game=o}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.F),t.Y36(m.h))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cursor"]],decls:2,vars:12,consts:[[1,"cursor",3,"ngClass","ngStyle"],["cursor",""]],template:function(e,o){1&e&&t._UZ(0,"div",0,1),2&e&&t.Q6J("ngClass",t.kEZ(2,F,"true"===o.ui.darkMode?"dark":"light",1===o.game.moveRepeat&&"left"===o.game.direction?"no-right-border":"all-borders",1===o.game.moveRepeat&&"right"===o.game.direction?"no-left-border":"all-borders"))("ngStyle",t.qbA(6,S,o.ui.blockSize,o.ui.blockSize,o.ui.cursorLeft,o.ui.cursorTop,o.ui.cursorOpacity))},directives:[s.mk,s.PC],styles:[".cursor[_ngcontent-%COMP%]{position:absolute;z-index:99;pointer-events:none;transition:opacity .1s ease-in-out}.light[_ngcontent-%COMP%]{border:1px solid #616161}.dark[_ngcontent-%COMP%]{border:1px solid #FFF}.no-left-border[_ngcontent-%COMP%]{border-left:none}.no-right-border[_ngcontent-%COMP%]{border-right:none}"]}),n})();const z=function(n,i,e,o){return{height:n,width:i,left:e,top:o}};let L=(()=>{class n{constructor(e){this.ui=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-border"]],decls:2,vars:6,consts:[[1,"border",3,"ngStyle"],["border",""]],template:function(e,o){1&e&&t._UZ(0,"div",0,1),2&e&&t.Q6J("ngStyle",t.l5B(1,z,o.ui.borderHeight,o.ui.borderWidth,o.ui.borderLeft,o.ui.borderTop))},directives:[s.PC],styles:[".border[_ngcontent-%COMP%]{border:10px solid #5D6D7E;position:absolute;pointer-events:none}"]}),n})();function A(n,i){if(1&n&&t._UZ(0,"app-game-block",4),2&n){const e=i.index,o=t.oxw();t.Q6J("gameBlock",o.game.blocks[e])}}const Z=function(n,i){return{height:n,width:i}},I=function(n){return[n]},J=function(n,i,e){return{height:n,width:i,marginTop:e}},Y=[{path:"",component:(()=>{class n{constructor(e,o,r){this.vexed=e,this.game=o,this.ui=r}onResize(){this.ui.resizeGameBoard()}ngOnInit(){this.vexed.newLevelEvent.subscribe(()=>{this.game.loadLevel()}),this.ui.didClearSaveData.subscribe(()=>{this.vexed.loadLastGame(),this.game.loadLevel()})}ionViewDidEnter(){setTimeout(()=>{this.game.loadLevel(),this.ui.resizeGameBoard()},500)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(B.X),t.Y36(m.h),t.Y36(d.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-game"]],hostBindings:function(e,o){1&e&&t.NdJ("resize",function(g){return o.onResize(g)},!1,t.Jf7)},decls:12,vars:17,consts:[["scrollX","false","scrollY","false"],[3,"ngStyle"],["id","game-board",3,"ngClass","ngStyle"],[3,"gameBlock",4,"ngFor","ngForOf"],[3,"gameBlock"]],template:function(e,o){1&e&&(t.TgZ(0,"ion-content",0)(1,"ion-card",1)(2,"ion-card-header")(3,"ion-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"ion-card-subtitle"),t._uU(6),t.qZA()(),t.TgZ(7,"ion-card-content")(8,"div",2),t.YNc(9,A,1,1,"app-game-block",3),t._UZ(10,"app-cursor")(11,"app-border"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("ngStyle",t.WLB(8,Z,o.ui.cardHeight,o.ui.cardWidth)),t.xp6(3),t.Oqu(o.vexed.currentLevel.name),t.xp6(2),t.lnq("Moves: ",o.game.currentMoveTotal,", Par: ",o.game.currentPar,", Best: ",o.game.currentBest,""),t.xp6(2),t.Q6J("ngClass",t.VKq(11,I,"true"===o.ui.darkMode?"dark":"light"))("ngStyle",t.kEZ(13,J,o.ui.boardHeight,o.ui.boardWidth,o.ui.heightOffset)),t.xp6(1),t.Q6J("ngForOf",o.game.blocks))},directives:[c.W2,c.PM,s.PC,c.Zi,c.Dq,c.tO,c.FN,s.mk,s.sg,G,T,L],styles:["#game-board[_ngcontent-%COMP%]{margin:auto;transition:all .2s ease-in;position:relative;transition:none}ion-card[_ngcontent-%COMP%]{margin:0;border-radius:0}.light[_ngcontent-%COMP%]{background-color:#bfc9ca}.dark[_ngcontent-%COMP%]{background-color:#2e4053}"]}),n})()}];let E=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[k.Bz.forChild(Y)],k.Bz]}),n})(),w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.Pc,s.ez,v.u5,E]]}),n})()}}]);